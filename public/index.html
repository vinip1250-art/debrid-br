<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <title>Brazuca Wrapper</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body {
      font-family: system-ui, sans-serif;
      background: #050816;
      color: #e5e7eb;
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      margin: 0;
    }
    .card {
      background: #111827;
      padding: 24px 28px;
      border-radius: 12px;
      max-width: 520px;
      width: 100%;
    }
    h1 {
      margin: 0 0 12px;
      font-size: 1.6rem;
      color: #f9fafb;
    }
    label {
      display: block;
      margin-top: 12px;
      font-size: 0.9rem;
      color: #d1d5db;
    }
    input[type="text"] {
      width: 100%;
      padding: 8px 10px;
      border-radius: 8px;
      border: 1px solid #374151;
      background: #020617;
      color: #e5e7eb;
      margin-top: 4px;
    }
    .preset-row {
      display: flex;
      gap: 10px;
      margin-top: 12px;
    }
    .preset-btn {
      flex: 1;
      padding: 8px;
      border-radius: 8px;
      border: none;
      background: #374151;
      color: white;
      cursor: pointer;
      font-size: 0.85rem;
      transition: 0.2s;
    }
    .preset-btn.active {
      background: #2563eb;
    }
    button {
      width: 100%;
      padding: 10px 12px;
      border-radius: 8px;
      border: none;
      background: #16a34a;
      color: white;
      font-weight: 600;
      cursor: pointer;
      margin-top: 10px;
    }
    button.blue {
      background: #2563eb;
    }
    button.purple {
      background: #7c3aed;
    }
    .link-box {
      margin-top: 10px;
      padding: 8px 10px;
      border-radius: 8px;
      background: #020617;
      border: 1px solid #374151;
      font-size: 0.8rem;
      word-break: break-word;
    }
  </style>
</head>
<body>
  <div class="card">
    <h1>Brazuca Wrapper</h1>

    <!-- PRESETS -->
    <div class="preset-row">
      <button id="preset1" class="preset-btn" onclick="presetBrazuca()">Brazuca puro</button>
      <button id="preset2" class="preset-btn" onclick="presetComet()">Brazuca + Comet</button>
    </div>

    <label>Nome do Addon</label>
    <input type="text" id="nomeAddon" value="Brazuca Debrid" />

    <label>Ícone (URL)</label>
    <input type="text" id="iconeUrl" value="https://i.imgur.com/KVpfrAk.png" />

    <!-- TORBOX -->
    <label>TorBox API Key</label>
    <input type="text" id="torboxKey" placeholder="Cole sua chave TorBox" />

    <button onclick="abrirTorbox()">Assinar TorBox (7 dias grátis)</button>
    <button onclick="copiarTorbox()">Copiar código TorBox</button>

    <!-- REAL DEBRID -->
    <label>Real‑Debrid API Key</label>
    <input type="text" id="rdKey" placeholder="Cole sua chave Real‑Debrid" />

    <button class="purple" onclick="abrirRD()">Criar conta / Assinar Real‑Debrid</button>

    <label>Premiumize API Key</label>
    <input type="text" id="premiumizeKey" placeholder="Cole sua chave Premiumize">

    <label>Debrid‑Link API Key</label>
    <input type="text" id="debridlinkKey" placeholder="Cole sua chave Debrid‑Link">
    
    <!-- GERAR -->
    <button class="blue" onclick="gerarConfiguracao()">Gerar Configuração</button>

    <div class="link-box" id="linkBox">O link do manifest aparecerá aqui.</div>

    <button class="blue" onclick="copiarLink()" id="copyBtn" style="display:none;">
      Copiar Link do Manifest
    </button>
  </div>

  <script>
    let ultimoLink = "";
    let presetSelecionado = "comet";

    function highlightPreset(id) {
      document.getElementById("preset1").classList.remove("active");
      document.getElementById("preset2").classList.remove("active");
      document.getElementById(id).classList.add("active");
    }

    function presetBrazuca() {
      presetSelecionado = "brazuca";
      highlightPreset("preset1");
    }

    function presetComet() {
      presetSelecionado = "comet";
      highlightPreset("preset2");
    }

    async function gerarConfiguracao() {
      const config = {
        nome: document.getElementById("nomeAddon").value,
        icone: document.getElementById("iconeUrl").value,
        torbox: document.getElementById("torboxKey").value,
        realdebrid: document.getElementById("rdKey").value,
        cometa: presetSelecionado === "comet"
      };

      try {
        const res = await fetch("/gerar", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(config)
        });

        const data = await res.json();
        ultimoLink = `${window.location.origin}/${data.id}/manifest.json`;

        document.getElementById("linkBox").textContent = ultimoLink;
        document.getElementById("copyBtn").style.display = "block";
      } catch {
        document.getElementById("linkBox").textContent = "Erro ao gerar configuração.";
      }
    }

    function copiarLink() {
      navigator.clipboard.writeText(ultimoLink);
      alert("Link copiado!");
    }

    function copiarTorbox() {
      navigator.clipboard.writeText("b08bcd10-8df2-44c9-a0ba-4d5bdb62ef96");
      alert("Código TorBox copiado!");
    }

    function abrirTorbox() {
      window.open("https://torbox.app/subscription?referral=b08bcd10-8df2-44c9-a0ba-4d5bdb62ef96", "_blank");
    }

    function abrirRD() {
      window.open("https://real-debrid.com/?id=6684575", "_blank");
    }
  </script>
</body>
</html>
