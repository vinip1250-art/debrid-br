<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="utf-8">
<title>BR Debrid</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
:root{
--bg:#050816;--card:#111827;--text:#e5e7eb;
--input:#020617;--border:#374151;--accent:#2563eb;
--warn-bg:#7f1d1d;--warn:#fecaca;
}
.light{
--bg:#f3f4f6;--card:#fff;--text:#111827;
--input:#f9fafb;--border:#d1d5db;
--warn-bg:#fee2e2;--warn:#7f1d1d;
}
body{
margin:0;min-height:100vh;
display:flex;align-items:center;justify-content:center;
background:var(--bg);color:var(--text);
font-family:system-ui,sans-serif;
}
.card{
width:100%;max-width:520px;
background:var(--card);
padding:22px;border-radius:14px;
box-shadow:0 0 30px #0006;
}
h1{text-align:center;margin:0}
.subtitle{text-align:center;font-size:.9rem;opacity:.75;margin-bottom:10px}
.small{font-size:.75rem;opacity:.7;text-align:center}

label{font-size:.85rem;margin-top:12px;display:block}
input,select{
width:100%;padding:10px;
border-radius:8px;border:1px solid var(--border);
background:var(--input);color:var(--text);
}
select{min-height:120px}

.toggle{
display:flex;justify-content:flex-end;gap:6px;
margin-bottom:6px;
}
.toggle button{width:auto;padding:6px 10px;font-size:.75rem}

.check-inline{
display:flex;
justify-content:space-between;
align-items:center;
gap:16px;
margin-top:10px;
}

.check-item{
display:flex;
align-items:center;
gap:6px;
font-size:.85rem;
white-space:nowrap;
}

button{
width:100%;padding:10px;
border:none;border-radius:8px;
background:var(--accent);color:#fff;
font-weight:600;cursor:pointer;
margin-top:12px;
}
button:disabled{opacity:.5}

.warn{
display:none;margin-top:10px;
background:var(--warn-bg);
color:var(--warn);
padding:8px;border-radius:8px;
font-size:.8rem;
}

.box{
margin-top:10px;
background:var(--input);
border:1px solid var(--border);
padding:10px;border-radius:8px;
}

.ref-buttons{
display:flex;
flex-direction:column;
gap:6px;
margin-top:8px;
}

.ref-buttons button{
background:#1f2937;
}

.link{font-size:.8rem;word-break:break-word}
</style>
</head>

<body>
<div class="card">

<div class="toggle">
<button onclick="toggleTheme()">üåó</button>
<button onclick="toggleLang()">PT/EN</button>
</div>

<h1>BR Debrid</h1>
<div class="subtitle" id="subtitle">
Stremio ‚Ä¢ Conte√∫do Dublado ‚Ä¢ Debrid
</div>

<p class="small" id="legal">
Este addon apenas organiza resultados p√∫blicos.
O uso de servi√ßos de terceiros √© responsabilidade do usu√°rio.
</p>

<label id="lblName">Nome do Addon</label>
<input id="nome" value="BR Debrid">

<label id="lblIcon">√çcone (URL)</label>
<input id="icone" value="https://brazuca-debrid.vercel.app/logo.png">

<div class="check-inline">
  <div class="check-item">
    <input type="checkbox" id="comet" checked>
    <label for="comet" id="lblComet">Comet (prioriza cache)</label>
  </div>

  <div class="check-item">
    <input type="checkbox" id="torrentio" checked>
    <label for="torrentio" id="lblTorrentio">Torrentio</label>
  </div>
</div>

<label id="lblDebrid">Escolha at√© 2 Debrids</label>
<select id="debrids" multiple>
<option value="torbox">üîµ TorBox</option>
<option value="realdebrid">üü° Real-Debrid</option>
<option value="premiumize">üü£ Premiumize</option>
<option value="debridlink">üü¢ Debrid-Link</option>
<option value="alldebrid">üî¥ AllDebrid</option>
<option value="offcloud">üß° Offcloud</option>
</select>

<div class="ref-buttons">
  <button onclick="window.open('https://torbox.app/subscription?referral=b08bcd10-8df2-44c9-a0ba-4d5bdb62ef96','_blank')">
    üîµ TorBox ‚Äî 7 dias gr√°tis
  </button>

  <button onclick="copiarTorbox()">
    üìã Copiar c√≥digo TorBox
  </button>

  <button onclick="window.open('https://real-debrid.com/?id=6684575','_blank')">
    üü° Criar conta Real-Debrid
  </button>
</div>

<div class="warn" id="warnLimit">M√°ximo 2 servi√ßos.</div>

<div id="fields"></div>
<div class="warn" id="warnApi">Informe ao menos uma API v√°lida.</div>

<button id="btn" onclick="gerar()" disabled>Gerar Configura√ß√£o</button>

<div class="box link" id="result">O link do addon aparecer√° aqui.</div>
<button id="copy" onclick="copiar()" style="display:none">Copiar Link</button>

</div>

<script>
let lang="pt",ultimo="";
const TORBOX_REF="b08bcd10-8df2-44c9-a0ba-4d5bdb62ef96";

function copiarTorbox(){
navigator.clipboard.writeText(TORBOX_REF);
alert("C√≥digo TorBox copiado!");
}

function toggleLang(){lang=lang==="pt"?"en":"pt"}
function toggleTheme(){document.body.classList.toggle("light")}

debrids.addEventListener("change",()=>{
const sel=[...debrids.selectedOptions].map(o=>o.value);
if(sel.length>2){
warnLimit.style.display="block";
debrids.selectedIndex=-1;
fields.innerHTML="";
validar();return;
}
warnLimit.style.display="none";
fields.innerHTML="";
sel.forEach(s=>{
fields.innerHTML+=`
<div class="box">
<label>${s} API Key</label>
<input id="${s}" placeholder="Cole sua API key">
</div>`;
});
sel.forEach(s=>{
document.getElementById(s).addEventListener("input",validar);
});
validar();
});

function validar(){
const sel=[...debrids.selectedOptions].map(o=>o.value);
const ok=sel.some(s=>document.getElementById(s)?.value.length>=10);
btn.disabled=!ok;
warnApi.style.display=ok?"none":"block";
}

async function gerar(){
btn.disabled=true;btn.innerText="Gerando...";
const sel=[...debrids.selectedOptions].map(o=>o.value);
const cfg={
nome:nome.value,
icone:icone.value,
debrids:sel,
cometa:comet.checked,
torrentio:torrentio.checked
};
sel.forEach(s=>cfg[s]=document.getElementById(s).value.trim());
const r=await fetch("/gerar",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(cfg)});
const d=await r.json();
ultimo=location.origin+"/"+d.id+"/manifest.json";
result.innerText=ultimo;
copy.style.display="block";
btn.innerText="Gerar Configura√ß√£o";
btn.disabled=false;
}

function copiar(){
navigator.clipboard.writeText(ultimo);
alert("Link copiado!");
}
</script>
</body>
</html>
